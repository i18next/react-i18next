!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports,require("react")):"function"==typeof define&&define.amd?define(["exports","react"],n):n((e="undefined"!=typeof globalThis?globalThis:e||self).ReactI18next={},e.React)}(this,(function(e,n){"use strict";function t(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var o=t({area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0}),s=/\s([^'"/\s><]+?)[\s/>]|([^\s=]+)=\s?(".*?"|'.*?')/g;function i(e){var n={type:"tag",name:"",voidElement:!1,attrs:{},children:[]},t=e.match(/<\/?([^\s]+?)[/\s>]/);if(t&&(n.name=t[1],(o[t[1]]||"/"===e.charAt(e.length-2))&&(n.voidElement=!0),n.name.startsWith("!--"))){var i=e.indexOf("--\x3e");return{type:"comment",comment:-1!==i?e.slice(4,i):""}}for(var r=new RegExp(s),a=null;null!==(a=r.exec(e));)if(a[0].trim())if(a[1]){var l=a[1].trim(),c=[l,""];l.indexOf("=")>-1&&(c=l.split("=")),n.attrs[c[0]]=c[1],r.lastIndex--}else a[2]&&(n.attrs[a[2]]=a[3].trim().substring(1,a[3].length-1));return n}var r=/<[a-zA-Z0-9\-\!\/](?:"[^"]*"|'[^']*'|[^'">])*>/g,a=/^\s*$/,l=Object.create(null);function c(e,n){switch(n.type){case"text":return e+n.content;case"tag":return e+="<"+n.name+(n.attrs?function(e){var n=[];for(var t in e)n.push(t+'="'+e[t]+'"');return n.length?" "+n.join(" "):""}(n.attrs):"")+(n.voidElement?"/>":">"),n.voidElement?e:e+n.children.reduce(c,"")+"</"+n.name+">";case"comment":return e+"\x3c!--"+n.comment+"--\x3e"}}var u={parse:function(e,n){n||(n={}),n.components||(n.components=l);var t,o=[],s=[],c=-1,u=!1;if(0!==e.indexOf("<")){var p=e.indexOf("<");o.push({type:"text",content:-1===p?e:e.substring(0,p)})}return e.replace(r,(function(r,l){if(u){if(r!=="</"+t.name+">")return;u=!1}var p,d="/"!==r.charAt(1),f=r.startsWith("\x3c!--"),g=l+r.length,m=e.charAt(g);if(f){var h=i(r);return c<0?(o.push(h),o):((p=s[c]).children.push(h),o)}if(d&&(c++,"tag"===(t=i(r)).type&&n.components[t.name]&&(t.type="component",u=!0),t.voidElement||u||!m||"<"===m||t.children.push({type:"text",content:e.slice(g,e.indexOf("<",g))}),0===c&&o.push(t),(p=s[c-1])&&p.children.push(t),s[c]=t),(!d||t.voidElement)&&(c>-1&&(t.voidElement||t.name===r.slice(2,-1))&&(c--,t=-1===c?o:s[c]),!u&&"<"!==m&&m)){p=-1===c?o:s[c].children;var y=e.indexOf("<",g),b=e.slice(g,-1===y?void 0:y);a.test(b)&&(b=" "),(y>-1&&c+p.length>=0||" "!==b)&&p.push({type:"text",content:b})}})),o},stringify:function(e){return e.reduce((function(e,n){return e+c("",n)}),"")}};function p(){if(console&&console.warn){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];"string"==typeof n[0]&&(n[0]=`react-i18next:: ${n[0]}`),console.warn(...n)}}const d={};function f(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];"string"==typeof n[0]&&d[n[0]]||("string"==typeof n[0]&&(d[n[0]]=new Date),p(...n))}const g=(e,n)=>()=>{if(e.isInitialized)n();else{const t=()=>{setTimeout((()=>{e.off("initialized",t)}),0),n()};e.on("initialized",t)}};function m(e,n,t){e.loadNamespaces(n,g(e,t))}function h(e,n,t,o){"string"==typeof t&&(t=[t]),t.forEach((n=>{e.options.ns.indexOf(n)<0&&e.options.ns.push(n)})),e.loadLanguages(n,g(e,o))}function y(e){return e.displayName||e.name||("string"==typeof e&&e.length>0?e:"Unknown")}const b=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,v={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"©","&#169;":"©","&reg;":"®","&#174;":"®","&hellip;":"…","&#8230;":"…","&#x2F;":"/","&#47;":"/"},x=e=>v[e];let E,N={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:e=>e.replace(b,x)};function O(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};N={...N,...e}}function $(){return N}function S(e){E=e}function k(){return E}function w(e,n){if(!e)return!1;const t=e.props?e.props.children:e.children;return n?t.length>0:!!t}function I(e){if(!e)return[];const n=e.props?e.props.children:e.children;return e.props&&e.props.i18nIsDynamicList?j(n):n}function j(e){return Array.isArray(e)?e:[e]}function C(e,t){if(!e)return"";let o="";const s=j(e),i=t.transSupportBasicHtmlNodes&&t.transKeepBasicHtmlNodesFor?t.transKeepBasicHtmlNodesFor:[];return s.forEach(((e,s)=>{if("string"==typeof e)o+=`${e}`;else if(n.isValidElement(e)){const n=Object.keys(e.props).length,r=i.indexOf(e.type)>-1,a=e.props.children;if(!a&&r&&0===n)o+=`<${e.type}/>`;else if(a||r&&0===n)if(e.props.i18nIsDynamicList)o+=`<${s}></${s}>`;else if(r&&1===n&&"string"==typeof a)o+=`<${e.type}>${a}</${e.type}>`;else{const e=C(a,t);o+=`<${s}>${e}</${s}>`}else o+=`<${s}></${s}>`}else if(null===e)p("Trans: the passed in value is invalid - seems you passed in a null child.");else if("object"==typeof e){const{format:n,...t}=e,s=Object.keys(t);if(1===s.length){const e=n?`${s[0]}, ${n}`:s[0];o+=`{{${e}}}`}else p("react-i18next: the passed in object contained more than one variable - the object should look like {{ value, format }} where format is optional.",e)}else p("Trans: the passed in value is invalid - seems you passed in a variable like {number} - please pass in variables for interpolation as full objects like {{number}}.",e)})),o}function R(e,t,o,s,i,r){if(""===t)return[];const a=s.transKeepBasicHtmlNodesFor||[],l=t&&new RegExp(a.map((e=>`<${e}`)).join("|")).test(t);if(!e&&!l&&!r)return[t];const c={};!function e(t){j(t).forEach((t=>{"string"!=typeof t&&(w(t)?e(I(t)):"object"!=typeof t||n.isValidElement(t)||Object.assign(c,t))}))}(e);const p=u.parse(`<0>${t}</0>`),d={...c,...i};function f(e,t,o){const s=I(e),i=m(s,t.children,o);return function(e){return"[object Array]"===Object.prototype.toString.call(e)&&e.every((e=>n.isValidElement(e)))}(s)&&0===i.length||e.props&&e.props.i18nIsDynamicList?s:i}function g(e,t,o,s,i){e.dummy?(e.children=t,o.push(n.cloneElement(e,{key:s},i?void 0:t))):o.push(...n.Children.map([e],(e=>{const o={...e.props};return delete o.i18nIsDynamicList,n.createElement(e.type,{...o,key:s,ref:e.ref},i?null:t)})))}function m(t,i,c){const u=j(t);return j(i).reduce(((t,i,p)=>{const h=i.children&&i.children[0]&&i.children[0].content&&o.services.interpolator.interpolate(i.children[0].content,d,o.language);if("tag"===i.type){let r=u[parseInt(i.name,10)];1!==c.length||r||(r=c[0][i.name]),r||(r={});const y=0!==Object.keys(i.attrs).length?function(e,n){const t={...n};return t.props=Object.assign(e.props,n.props),t}({props:i.attrs},r):r,b=n.isValidElement(y),v=b&&w(i,!0)&&!i.voidElement,x=l&&"object"==typeof y&&y.dummy&&!b,E="object"==typeof e&&null!==e&&Object.hasOwnProperty.call(e,i.name);if("string"==typeof y){const e=o.services.interpolator.interpolate(y,d,o.language);t.push(e)}else if(w(y)||v){g(y,f(y,i,c),t,p)}else if(x){g(y,m(u,i.children,c),t,p)}else if(Number.isNaN(parseFloat(i.name)))if(E){g(y,f(y,i,c),t,p,i.voidElement)}else if(s.transSupportBasicHtmlNodes&&a.indexOf(i.name)>-1)if(i.voidElement)t.push(n.createElement(i.name,{key:`${i.name}-${p}`}));else{const e=m(u,i.children,c);t.push(n.createElement(i.name,{key:`${i.name}-${p}`},e))}else if(i.voidElement)t.push(`<${i.name} />`);else{const e=m(u,i.children,c);t.push(`<${i.name}>${e}</${i.name}>`)}else if("object"!=typeof y||b)g(y,h,t,p,1!==i.children.length||!h);else{const e=i.children[0]?h:null;e&&t.push(e)}}else if("text"===i.type){const e=s.transWrapTextNodes,a=r?s.unescape(o.services.interpolator.interpolate(i.content,d,o.language)):o.services.interpolator.interpolate(i.content,d,o.language);e?t.push(n.createElement(e,{key:`${i.name}-${p}`},a)):t.push(a)}return t}),[])}return I(m([{dummy:!0,children:e||[]}],p,j(e||[]))[0])}function T(e){let{children:t,count:o,parent:s,i18nKey:i,context:r,tOptions:a={},values:l,defaults:c,components:u,ns:p,i18n:d,t:g,shouldUnescape:m,...h}=e;const y=d||k();if(!y)return f("You will need to pass in an i18next instance by using i18nextReactModule"),t;const b=g||y.t.bind(y)||(e=>e);r&&(a.context=r);const v={...$(),...y.options&&y.options.react};let x=p||b.ns||y.options&&y.options.defaultNS;x="string"==typeof x?[x]:x||["translation"];const E=C(t,v),N=c||E||v.transEmptyNodeValue||i,{hashTransKey:O}=v,S=i||(O?O(E||N):E||N);y.options&&y.options.interpolation&&y.options.interpolation.defaultVariables&&(l=l&&Object.keys(l).length>0?{...l,...y.options.interpolation.defaultVariables}:{...y.options.interpolation.defaultVariables});const w=l||void 0!==o?a.interpolation:{interpolation:{...a.interpolation,prefix:"#$?",suffix:"?$#"}},I={...a,count:o,...l,...w,defaultValue:N,ns:x},j=S?b(S,I):N;u&&Object.keys(u).forEach((e=>{const t=u[e];"function"==typeof t.type||!t.props||!t.props.children||j.indexOf(`${e}/>`)<0&&j.indexOf(`${e} />`)<0||(u[e]=n.createElement((function(){return n.createElement(n.Fragment,null,t)})))}));const T=R(u||t,j,y,v,I,m),L=void 0!==s?s:v.defaultTransParent;return L?n.createElement(L,h,T):T}const L={type:"3rdParty",init(e){O(e.options.react),S(e)}},P=n.createContext();class V{constructor(){this.usedNamespaces={}}addUsedNamespaces(e){e.forEach((e=>{this.usedNamespaces[e]||(this.usedNamespaces[e]=!0)}))}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}function z(e){return n=>new Promise((t=>{const o=A();e.getInitialProps?e.getInitialProps(n).then((e=>{t({...e,...o})})):t(o)}))}function A(){const e=k(),n=e.reportNamespaces?e.reportNamespaces.getUsedNamespaces():[],t={},o={};return e.languages.forEach((t=>{o[t]={},n.forEach((n=>{o[t][n]=e.getResourceBundle(t,n)||{}}))})),t.initialI18nStore=o,t.initialLanguage=e.language,t}const B=(e,t)=>{const o=n.useRef();return n.useEffect((()=>{o.current=t?o.current:e}),[e,t]),o.current};function F(e,n,t,o){return e.getFixedT(n,t,o)}function U(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{i18n:o}=t,{i18n:s,defaultNS:i}=n.useContext(P)||{},r=o||s||k();if(r&&!r.reportNamespaces&&(r.reportNamespaces=new V),!r){f("You will need to pass in an i18next instance by using initReactI18next");const e=(e,n)=>"string"==typeof n?n:n&&"object"==typeof n&&"string"==typeof n.defaultValue?n.defaultValue:Array.isArray(e)?e[e.length-1]:e,n=[e,{},!1];return n.t=e,n.i18n={},n.ready=!1,n}r.options.react&&void 0!==r.options.react.wait&&f("It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const a={...$(),...r.options.react,...t},{useSuspense:l,keyPrefix:c}=a;let u=e||i||r.options&&r.options.defaultNS;u="string"==typeof u?[u]:u||["translation"],r.reportNamespaces.addUsedNamespaces&&r.reportNamespaces.addUsedNamespaces(u);const p=(r.isInitialized||r.initializedStoreOnce)&&u.every((e=>function(e,n){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n.languages&&n.languages.length?void 0!==n.options.ignoreJSONStructure?n.hasLoadedNamespace(e,{lng:t.lng,precheck:(n,o)=>{if(t.bindI18n&&t.bindI18n.indexOf("languageChanging")>-1&&n.services.backendConnector.backend&&n.isLanguageChangingTo&&!o(n.isLanguageChangingTo,e))return!1}}):function(e,n){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=n.languages[0],s=!!n.options&&n.options.fallbackLng,i=n.languages[n.languages.length-1];if("cimode"===o.toLowerCase())return!0;const r=(e,t)=>{const o=n.services.backendConnector.state[`${e}|${t}`];return-1===o||2===o};return!(t.bindI18n&&t.bindI18n.indexOf("languageChanging")>-1&&n.services.backendConnector.backend&&n.isLanguageChangingTo&&!r(n.isLanguageChangingTo,e)||!n.hasResourceBundle(o,e)&&n.services.backendConnector.backend&&(!n.options.resources||n.options.partialBundledLanguages)&&(!r(o,e)||s&&!r(i,e)))}(e,n,t):(f("i18n.languages were undefined or empty",n.languages),!0)}(e,r,a))),d=function(e,t,o,s){return n.useCallback(F(e,t,o,s),[e,t,o,s])}(r,t.lng||null,"fallback"===a.nsMode?u:u[0],c),g=()=>d,y=()=>F(r,t.lng||null,"fallback"===a.nsMode?u:u[0],c);console.log("useState(getT())"),console.log(g),console.log(g());const[b,v]=n.useState(g);let x=u.join();t.lng&&(x=`${t.lng}${x}`);const E=B(x),N=n.useRef(!0);n.useEffect((()=>{const{bindI18n:e,bindI18nStore:n}=a;function o(){N.current&&(console.log("4"),v(y))}return N.current=!0,p||l||(console.log("!ready !useSuspense"),t.lng?(console.log("!ready !useSuspense props.lng"),h(r,t.lng,u,(()=>{N.current&&(console.log("1"),v(y))}))):(console.log("!ready !useSuspense !props.lng"),m(r,u,(()=>{console.log("!ready !useSuspense !props.lng loadNamespacesCallback"),N.current&&(console.log("2"),v(y))})))),p&&E&&E!==x&&N.current&&(console.log("3"),v(y)),e&&r&&r.on(e,o),n&&r&&r.store.on(n,o),()=>{N.current=!1,e&&r&&e.split(" ").forEach((e=>r.off(e,o))),n&&r&&n.split(" ").forEach((e=>r.store.off(e,o)))}}),[r,x]);const O=n.useRef(!0);n.useEffect((()=>{console.log("8:09 before"),N.current&&!O.current&&(console.log("8:09 inside"),v(g)),O.current=!1}),[r,c]);const S=[b,r,p];if(S.t=b,S.i18n=r,S.ready=p,p)return console.log("returning 0",S.t),S;if(!p&&!l)return console.log("returning 1"),S;throw new Promise((e=>{t.lng?h(r,t.lng,u,(()=>e())):m(r,u,(()=>e()))}))}function K(e,t){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{i18n:s}=o,{i18n:i}=n.useContext(P)||{},r=s||i||k();r.options&&r.options.isClone||(e&&!r.initializedStoreOnce&&(r.services.resourceStore.data=e,r.options.ns=Object.values(e).reduce(((e,n)=>(Object.keys(n).forEach((n=>{e.indexOf(n)<0&&e.push(n)})),e)),r.options.ns),r.initializedStoreOnce=!0,r.isInitialized=!0),t&&!r.initializedLanguageOnce&&(r.changeLanguage(t),r.initializedLanguageOnce=!0))}e.I18nContext=P,e.I18nextProvider=function(e){let{i18n:t,defaultNS:o,children:s}=e;const i=n.useMemo((()=>({i18n:t,defaultNS:o})),[t,o]);return n.createElement(P.Provider,{value:i},s)},e.Trans=function(e){let{children:t,count:o,parent:s,i18nKey:i,context:r,tOptions:a={},values:l,defaults:c,components:u,ns:p,i18n:d,t:f,shouldUnescape:g,...m}=e;const{i18n:h,defaultNS:y}=n.useContext(P)||{},b=d||h||k(),v=f||b&&b.t.bind(b);return T({children:t,count:o,parent:s,i18nKey:i,context:r,tOptions:a,values:l,defaults:c,components:u,ns:p||v&&v.ns||y||b&&b.options&&b.options.defaultNS,i18n:b,t:f,shouldUnescape:g,...m})},e.TransWithoutContext=T,e.Translation=function(e){const{ns:n,children:t,...o}=e,[s,i,r]=U(n,o);return t(s,{i18n:i,lng:i.language},r)},e.composeInitialProps=z,e.date=()=>"",e.getDefaults=$,e.getI18n=k,e.getInitialProps=A,e.initReactI18next=L,e.number=()=>"",e.plural=()=>"",e.select=()=>"",e.selectOrdinal=()=>"",e.setDefaults=O,e.setI18n=S,e.time=()=>"",e.useSSR=K,e.useTranslation=U,e.withSSR=function(){return function(e){function t(t){let{initialI18nStore:o,initialLanguage:s,...i}=t;return K(o,s),n.createElement(e,{...i})}return t.getInitialProps=z(e),t.displayName=`withI18nextSSR(${y(e)})`,t.WrappedComponent=e,t}},e.withTranslation=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(o){function s(s){let{forwardedRef:i,...r}=s;const[a,l,c]=U(e,{...r,keyPrefix:t.keyPrefix}),u={...r,t:a,i18n:l,tReady:c};return t.withRef&&i?u.ref=i:!t.withRef&&i&&(u.forwardedRef=i),n.createElement(o,u)}s.displayName=`withI18nextTranslation(${y(o)})`,s.WrappedComponent=o;return t.withRef?n.forwardRef(((e,t)=>n.createElement(s,Object.assign({},e,{forwardedRef:t})))):s}}}));
